!function(){"use strict";var e={n:function(t){var l=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(l,{a:l}),l},d:function(t,l){for(var n in l)e.o(l,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:l[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=window.wp.element,l=window.wp.blocks,n=window.wp.components,o=window.wp.blockEditor,s=window.wp.i18n,r=window.wp.serverSideRender,i=e.n(r),c=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"llms/course-outline","title":"Course Outline","category":"llms-blocks","description":"Outputs the course outline as displayed by the widget of the same name. Can show full course outline or just the current section outline. Setting the Outline Type to Current Sections refers to the section that contains the next uncompleted lesson for current student. If the student is not enrolled then the first section in the course will be displayed.","textdomain":"lifterlms","attributes":{"collapse":{"type":"boolean","default":false},"course_id":{"type":"integer"},"outline_type":{"type":"string","default":"full"},"toggles":{"type":"boolean","default":false},"llms_visibility":{"type":"string"},"llms_visibility_in":{"type":"string"},"llms_visibility_posts":{"type":"string"}},"supports":{"align":["wide","full"]},"editorScript":"file:./index.js"}'),a=window.wp.primitives,u=window.wp.data;const p=["course","lesson","llms_quiz"],d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";const l=null==e?void 0:e.replace("llms_",""),n=l.charAt(0).toUpperCase()+l.slice(1);return"name"===t?l:n},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"course";const{posts:t,currentPostType:l}=(0,u.useSelect)((t=>{var l;return{posts:t("core").getEntityRecords("postType",e),currentPostType:null===(l=t("core/editor"))||void 0===l?void 0:l.getCurrentPostType()}}),[]),n=(d(e),[]);return p.includes(l)||n.push({label:(0,s.__)("Select course","lifterlms"),value:0}),null!=t&&t.length&&t.forEach((e=>{n.push({label:e.title.rendered+" (ID: "+e.id+")",value:e.id})})),p.includes(l)&&n.unshift({label:(0,s.sprintf)(// Translators: %s = Post type name.
(0,s.__)("Inherit from current %s","lifterlms"),d(l)),value:0}),null!=n&&n.length||n.push({label:(0,s.__)("Loading","lifterlms"),value:0}),n},f=e=>{var l,o;let{attributes:r,setAttributes:i,postType:c="course",attribute:a="course_id"}=e;const u=m(c),p=d(c),f=d(c,"title"),h=(0,s.sprintf)(// Translators: %s = Post type name.
(0,s.__)("Select the %s to associate with this block.","lifterlms"),p);return(0,t.createElement)(n.PanelRow,null,(0,t.createElement)(n.SelectControl,{label:f,help:h,value:null!==(l=null==r?void 0:r[a])&&void 0!==l?l:null==u||null===(o=u[0])||void 0===o?void 0:o.value,options:u,onChange:e=>{i({[a]:parseInt(e,10)})}}))};(0,l.registerBlockType)(c,{icon:()=>(0,t.createElement)(a.SVG,{className:"llms-block-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},(0,t.createElement)(a.Path,{d:"M64 32C64 14.3 49.7 0 32 0S0 14.3 0 32v96V384c0 35.3 28.7 64 64 64H256V384H64V160H256V96H64V32zM288 192c0 17.7 14.3 32 32 32H544c17.7 0 32-14.3 32-32V64c0-17.7-14.3-32-32-32H445.3c-8.5 0-16.6-3.4-22.6-9.4L409.4 9.4c-6-6-14.1-9.4-22.6-9.4H320c-17.7 0-32 14.3-32 32V192zm0 288c0 17.7 14.3 32 32 32H544c17.7 0 32-14.3 32-32V352c0-17.7-14.3-32-32-32H445.3c-8.5 0-16.6-3.4-22.6-9.4l-13.3-13.3c-6-6-14.1-9.4-22.6-9.4H320c-17.7 0-32 14.3-32 32V480z"})),edit:e=>{const{attributes:l,setAttributes:r}=e,a=(0,o.useBlockProps)(),d=(()=>{const e=(0,u.useSelect)((e=>{var t;return null===(t=e("core/editor"))||void 0===t?void 0:t.getCurrentPostType()}),[]);return p.includes(e)})(),h=m(),_=(0,t.useMemo)((()=>(0,t.createElement)(i(),{block:c.name,attributes:l,LoadingResponsePlaceholder:()=>(0,t.createElement)(n.Spinner,null),ErrorResponsePlaceholder:()=>(0,t.createElement)("p",{className:"llms-block-error"},(0,s.__)("Error loading content. Please check block settings are valid. This block will not be displayed.","lifterlms")),EmptyResponsePlaceholder:()=>(0,t.createElement)("p",{className:"llms-block-empty"},(0,s.__)("No outline information available for this course. This block will not be displayed.","lifterlms"))})),[l]);var b;return l.course_id||d||r({course_id:null==h||null===(b=h[0])||void 0===b?void 0:b.value}),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(n.PanelBody,{title:(0,s.__)("Course Outline Settings","lifterlms")},(0,t.createElement)(n.PanelRow,null,(0,t.createElement)(n.ToggleControl,{label:(0,s.__)("Collapse","lifterlms"),help:(0,s.__)("If true, will make the outline sections collapsible via click events.","lifterlms"),checked:l.collapse,onChange:e=>r({collapse:e})})),l.collapse&&(0,t.createElement)(n.PanelRow,null,(0,t.createElement)(n.ToggleControl,{label:(0,s.__)("Toggles","lifterlms"),help:(0,s.__)('If true, will display "Collapse All" and "Expand All" toggles at the bottom of the outline. Only functions if "collapse" is true.',"lifterlms"),checked:l.toggles,onChange:e=>r({toggles:e})})),(0,t.createElement)(f,e),(0,t.createElement)(n.PanelRow,null,(0,t.createElement)(n.SelectControl,{label:(0,s.__)("Outline Type","lifterlms"),help:(0,s.__)("Select the type of outline to display.","lifterlms"),value:l.outline_type,options:[{label:(0,s.__)("Full","lifterlms"),value:"full",isDefault:!0},{label:(0,s.__)("Current Section","lifterlms"),value:"current_section"}],onChange:e=>r({outline_type:e})})))),(0,t.createElement)("div",a,(0,t.createElement)(n.Disabled,null,_)))}})}();